# 🎬 视频生成功能运行指南

## ✅ 当前状态

您的视频生成功能已经成功实现并可以运行！刚才的演示脚本已经展示了分镜头生成的效果。

## 🚀 快速开始

### 1. 演示模式（无需API密钥）

```bash
cd /Users/0xNiedlichX/Code/Workflow
python3 test_demo.py
```

这个脚本使用模拟数据展示分镜头生成功能，不需要任何API密钥。

### 2. 真实API模式（需要API密钥）

要使用真实的API生成视频，您需要：

#### 步骤1：获取API密钥

1. **DeepSeek API密钥**（用于分镜头生成）
   - 访问：https://platform.deepseek.com/
   - 注册账号并获取API Key

2. **豆包Seedance API密钥**（用于视频生成）
   - 访问豆包开放平台
   - 申请Seedance视频生成API

#### 步骤2：设置环境变量

```bash
# 设置DeepSeek API密钥
export LLM_API_KEY=sk-your_deepseek_api_key_here

# 设置豆包Seedance API密钥
export DOUBAO_API_KEY=your_doubao_seedance_api_key_here

# 可选：设置其他配置
export LLM_BASE_URL=https://api.deepseek.com
export DOUBAO_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
export VIDEO_OUTPUT_DIR=videos
export DEFAULT_SCENE_COUNT=3
```

#### 步骤3：运行测试

```bash
# 仅测试分镜头生成（只需要DeepSeek API）
python3 test_storyboard_only.py

# 完整视频生成测试（需要两个API）
python3 test_video_generation.py
```

## 📁 文件说明

| 文件名 | 功能 | 需要API |
|--------|------|---------|
| `test_demo.py` | 演示分镜头生成（模拟数据） | ❌ 无需API |
| `test_storyboard_only.py` | 测试分镜头生成（真实API） | ✅ DeepSeek API |
| `test_video_generation.py` | 完整视频生成测试 | ✅ 两个API都需要 |
| `main.py` | 完整工作流（包含视频生成） | ✅ 两个API都需要 |

## 🎯 功能展示

### 分镜头生成结果

刚才的演示生成了3个8秒分镜头：

1. **开场引入** (8秒)
   - 职场办公室场景
   - 思考的职场人士
   - 文本覆盖："为什么聪明人都在'装傻'？"

2. **核心观点展示** (8秒)
   - 会议室对比场景
   - 不同性格人物表现
   - 文本覆盖："真正的智慧在于'藏拙'"

3. **总结升华** (8秒)
   - 人物特写微笑
   - 虚化背景效果
   - 文本覆盖："真正的智慧，往往藏在'不争'之中"

### 视频生成流程

1. ✅ **分镜头脚本生成** - 已完成演示
2. 🔄 **调用豆包Seedance API** - 需要真实API密钥
3. 🎬 **生成8秒视频文件** - 每个分镜头一个视频
4. 💾 **下载并保存视频** - 保存到videos目录
5. 📊 **生成完整报告** - 包含所有结果

## 🔧 故障排除

### 常见问题

1. **ModuleNotFoundError: No module named 'aiohttp'**
   ```bash
   pip3 install aiohttp
   ```

2. **API密钥未设置**
   ```bash
   export LLM_API_KEY=your_actual_api_key
   export DOUBAO_API_KEY=your_actual_api_key
   ```

3. **权限问题**
   ```bash
   chmod +x test_*.py
   ```

### 检查环境

```bash
# 检查Python版本
python3 --version

# 检查已安装的包
pip3 list | grep aiohttp

# 检查环境变量
echo $LLM_API_KEY
echo $DOUBAO_API_KEY
```

## 📊 输出文件

运行后会生成以下文件：

- `demo_storyboard_result.json` - 演示分镜头结果
- `storyboard_result.json` - 真实分镜头结果
- `videos/` - 视频文件目录
  - `scene_1_20241201_143022.mp4`
  - `scene_2_20241201_143025.mp4`
  - `scene_3_20241201_143028.mp4`

## 🎉 成功运行确认

如果您看到以下输出，说明功能运行成功：

```
✅ 成功生成 3 个分镜头
🎬 分镜头 1: 开场引入
🎬 分镜头 2: 核心观点展示  
🎬 分镜头 3: 总结升华
💾 分镜头结果已保存到: demo_storyboard_result.json
```

## 🔄 下一步

1. **获取API密钥** - 申请DeepSeek和豆包Seedance的API
2. **设置环境变量** - 配置API密钥
3. **运行完整测试** - 测试真实的视频生成功能
4. **集成到工作流** - 在main.py中使用完整功能

## 📞 技术支持

如果遇到问题，请检查：
1. Python版本（建议3.8+）
2. 依赖包安装（aiohttp等）
3. API密钥配置
4. 网络连接状态
5. 日志输出信息

您的视频生成功能已经准备就绪！🎬✨
